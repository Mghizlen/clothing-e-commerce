try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c1cf6444-106a-4362-b594-a08b750312b4",e._sentryDebugIdIdentifier="sentry-dbid-c1cf6444-106a-4362-b594-a08b750312b4")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{2032:(e,t,n)=>{"use strict";n.d(t,{$:()=>a});let r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_";if(64!==r.length)throw Error("err");function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),Array.from(t).map(e=>r[e%r.length]).join("")}},3585:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>o,_0:()=>s,d:()=>i,hH:()=>a,vb:()=>l});var r=n(29734);let a=(0,r.eU)(null),i=(0,r.eU)(""),l=(0,r.eU)(""),o=(0,r.eU)(!1),s=(0,r.eU)({})},20429:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(38254);let a=()=>{let e=r.i.getSubscriptionInfo.useQuery(void 0,{refetchInterval:15e3}),{maintenanceReadonly:t,subscriptions:n}=function(){if(!e.data)return{maintenanceReadonly:void 0,subscriptions:void 0};let{maintenanceReadonly:t,...n}=e.data;return{maintenanceReadonly:t,subscriptions:n}}(),a=n?function(e){let t=e.teams.find(e=>{var t;return null==(t=e.subscription)?void 0:t.isActive});if(void 0!==t){var n,r;let e=null!=(r=null==(n=t.subscription)?void 0:n.isActive)&&r;return{subscriptionSource:"team",subscriptionId:t.teamId,isSubscriptionAdmin:"owner"===t.role,displayName:"Team",isActive:e,canExportToFigma:e,numGenerationsLeft:e?"unlimited":0,numGenerationsToday:null,canGenerate:e,canFastGenerate:e}}let a=e.individual;return{subscriptionSource:"individual",subscriptionId:a.userId,isSubscriptionAdmin:!0,displayName:a.isActive?"Pro":"Free",isActive:a.isActive,canExportToFigma:a.isActive,canFastGenerate:a.isActive,...function(e){let t=null!==e.lastScreenRecordTime&&(e=>{let t=new Date,n=t.getFullYear(),r=t.getMonth(),a=t.getDate(),i=e.getFullYear(),l=e.getMonth(),o=e.getDate();return i===n&&l===r&&o===a})(e.lastScreenRecordTime)?e.screenCount:0,n=e.isActive?"unlimited":Math.max(20-t,0);return{numGenerationsLeft:n,numGenerationsToday:t,canGenerate:0!==n}}(a)}}(n):void 0;return{maintenanceReadonly:t,subscriptions:n,effectiveSubscription:a,isLoading:e.isLoading,error:e.error}}},27278:e=>{e.exports={logo:"styles_logo__HcxjN",spinGradient:"styles_spinGradient__GzEQk",spinner:"styles_spinner__0B6_w",spin:"styles_spin__3_0Z_",titleContainer:"styles_titleContainer__EuSFd",title:"styles_title__DMW7k"}},27806:(e,t,n)=>{"use strict";n.d(t,{k:()=>l});var r=n(19749),a=n(63879);let i=[.1,.2,.5,.75,1,1.25,2],l=()=>{let e,t,n,l,o=(0,r.c)(10),s=(0,a.VH)();o[0]!==s?(e=()=>{let e=s.getZoom(),t=i.find(t=>e<t);if(void 0!==t)return s.zoomTo(t)},o[0]=s,o[1]=e):e=o[1];let d=e;o[2]!==s?(t=()=>{let e=s.getZoom(),t=i.findLast(t=>e>t);if(void 0!==t)return s.zoomTo(t)},o[2]=s,o[3]=t):t=o[3];let u=t;o[4]!==s?(n=(e,t)=>s.fitView({nodes:[{id:e}],padding:{right:"".concat(64,"px"),left:"".concat(320,"px"),y:"".concat(64,"px")},...void 0===t?{duration:300,interpolate:"linear"}:t}),o[4]=s,o[5]=n):n=o[5];let c=n;return o[6]!==c||o[7]!==d||o[8]!==u?(l={zoomIn:d,zoomOut:u,fitViewToChat:c},o[6]=c,o[7]=d,o[8]=u,o[9]=l):l=o[9],l}},36829:(e,t,n)=>{"use strict";n.d(t,{Bq:()=>m,EC:()=>g,Qd:()=>y,RW:()=>f});var r=n(19749),a=n(55902),i=n(71498),l=n(99333),o=n(12115),s=n(38254),d=n(61641),u=n(2032),c=n(70891);let m=(e,t,n)=>{var r;let{data:a}=s.i.getFlow.useQuery({flowId:e},{enabled:!n}),i=null!=n?n:a,{data:l}=s.i.getActiveStructure.useQuery({screenId:null!=t?t:""},{enabled:void 0!==t}),o=void 0!==t&&null!=(r=null==l?void 0:l.themeId)?r:null==i?void 0:i.themeId,{data:d}=s.i.getTheme.useQuery({themeId:null!=o?o:""},{enabled:"string"==typeof o});return d},f=e=>{let t,n,a=(0,r.c)(3),s=m(e,void 0);a[0]!==s?(t=()=>{void 0!==s&&(e=>{var t;document.documentElement.style.setProperty("--accent-bg",e),document.documentElement.style.setProperty("--secondary-bg",e===(null==(t=i.T[0])?void 0:t.value)?"#ebebeb80":(0,l.A)(e).alpha(.1).rgb().string()),document.documentElement.style.setProperty("--secondary-bg-text",e)})(s["--accent"])},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,o.useEffect)(t,n)},g=(e,t)=>{let n=(e=>{let t=s.i.useUtils();return s.i.updateTheme.useMutation({onMutate:async n=>{let{updates:r}=n,{revertOptimisticThemeUpdate:a}=await p(t,e.id,{action:"update",update:r});return a},onError:async(e,t,n)=>{console.error("Error updating flow theme"),a.Cp(e),await (null==n?void 0:n())}})})(t),i=(0,o.useMemo)(u.$,[t.id]),l=((e,t,n)=>{let a,i=(0,r.c)(6),l=(0,d.d)(),o=s.i.useUtils();return i[0]!==e||i[1]!==n||i[2]!==l||i[3]!==t||i[4]!==o?(a={onMutate:async r=>{let{updates:a}=r,i={...t,name:t.name+" (Edited)",...a,userId:l.user.id,id:n},[s,d]=await Promise.all([p(o,n,{action:"updateOrInsert",update:i}),(0,c.z0)(o,e,{themeId:n})]),{revertOptimisticThemeUpdate:u}=s;return async()=>{null==d||d.revertOptimisticFlowUpdate(),await u()}},onError:v},i[0]=e,i[1]=n,i[2]=l,i[3]=t,i[4]=o,i[5]=a):a=i[5],s.i.duplicateDefaultTheme.useMutation(a)})(e,t,i);return{mutate:r=>{t.userId?n.mutate({themeId:t.id,updates:r}):l.mutate({themeId:t.id,updates:r,flowId:e,optimisticId:i})}}};async function p(e,t,n){await e.getVisibleThemes.cancel(),await e.getTheme.cancel();let r=e.getVisibleThemes.getData(),a=e.getTheme.getData({themeId:t});return e.getVisibleThemes.setData(void 0,e=>{if(void 0===e)return;let r=e.findIndex(e=>e.id===t);return -1!==r?e.with(r,{...e[r],...n.update}):"updateOrInsert"===n.action?[...e,n.update]:void 0}),e.getTheme.setData({themeId:t},e=>e?{...e,...n.update}:"updateOrInsert"===n.action?n.update:void 0),{revertOptimisticThemeUpdate:async()=>{e.getVisibleThemes.setData(void 0,r),e.getTheme.setData({themeId:t},a),await e.getVisibleThemes.invalidate()}}}function y(){let e,t,n=(0,r.c)(4),a=s.i.useUtils(),i=s.i.getVisibleThemes.useQuery(),{data:l}=i;return n[0]!==l||n[1]!==a?(e=()=>{if(l)for(let e of l)a.getTheme.setData({themeId:e.id},e)},t=[l,a],n[0]=l,n[1]=a,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,o.useEffect)(e,t),i}async function v(e,t,n){console.error("Error updating flow theme"),a.Cp(e),await (null==n?void 0:n())}},37601:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});let r=(0,n(12115).createContext)({get readonly(){throw Error("ReadonlyContext was not initialized")},get reason(){throw Error("ReadonlyContext was not initialized")}})},38254:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});let r=(0,n(95480).pY)()},45898:(e,t,n)=>{"use strict";n.d(t,{jb:()=>Z,nY:()=>W,Gr:()=>O,Sr:()=>Y,y4:()=>en,yp:()=>et});var r=n(91351),a=n(31455),i=n(20899),l=n(9106),o=n(7125),s=n(98622),d=n(60210),u=n(25884),c=n(68170),m=n(98775),f=n(25601),g=n(40786),p=n(46782),y=n(43711),v=n(98880),b=n(2032),w=n(52280);let h=(e,t)=>Object.fromEntries(Object.entries(e).map(e=>{let[n,r]=e;return[n,t(r)]}));var I=n(54579);function N(){let e=(0,r._)(["("," IS NULL) != ("," IS NULL)"]);return N=function(){return e},e}let S=["inter","dmSans","nunito","ptSerif","spaceGrotesk","ibmPlexMono","ibmPlexSans","robotoSlab","geist","shantellSans"],x=(0,a.rL)("font_family",S),F=()=>(0,i.yf)({length:255}),A=(0,l.cJ)("users",{id:F().primaryKey(),email:(0,o.Qq)().notNull(),image:(0,o.Qq)(),createdAt:(0,s.vE)().notNull().defaultNow(),fullName:(0,o.Qq)(),firstName:(0,o.Qq)(),lastName:(0,o.Qq)(),hostedDomain:(0,o.Qq)(),dubId:(0,i.yf)({length:255}),onboardingRole:(0,o.Qq)(),onboardingOrgSize:(0,o.Qq)(),country:(0,o.Qq)()}),E=(0,l.cJ)("subscriptions",{userId:(0,i.yf)({length:255}).primaryKey().references(()=>A.id,{onDelete:"cascade"}),isActive:(0,d.zM)().notNull(),screenCount:(0,u.nd)().notNull(),lastScreenRecordTime:(0,s.vE)(),createdAt:(0,s.vE)().notNull().defaultNow(),emailPayment:(0,o.Qq)(),stripeSubscriptionId:(0,i.yf)({length:255}).unique(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)},e=>[(0,c.Pe)("indiv_subscription_by_stripe_id").on(e.stripeSubscriptionId)]),D=(0,l.cJ)("teamSubscriptions",{teamId:F().primaryKey().references(()=>_.id,{onDelete:"cascade"}),isActive:(0,d.zM)().notNull(),stripeSubscriptionId:(0,i.yf)({length:255}).unique().notNull(),emailPayment:(0,o.Qq)().notNull(),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)},e=>[(0,c.Pe)("team_subscription_by_stripe_id").on(e.stripeSubscriptionId)]),_=(0,l.cJ)("teams",{id:F().primaryKey().$defaultFn(b.$),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)}),T=(0,a.rL)("teamrole",["owner","editor"]);(0,l.cJ)("team_members",{teamId:F().notNull().references(()=>_.id,{onDelete:"cascade"}),userId:F().notNull().references(()=>A.id),role:T().notNull(),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)},e=>[(0,m.ie)({columns:[e.teamId,e.userId]}),(0,c.Pe)().on(e.teamId),(0,c.Pe)().on(e.userId)]);let Q=(0,a.rL)("team_invite_status",["pending","accepted","declined"]);(0,l.cJ)("team_invites",{id:F().primaryKey().$defaultFn(b.$),teamId:F().notNull().references(()=>_.id,{onDelete:"cascade"}),email:(0,o.Qq)().notNull(),role:T().notNull(),status:Q().notNull(),createdBy:F().notNull().references(()=>A.id),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date),finalizedAt:(0,s.vE)(),finalizedBy:F().references(()=>A.id,{onDelete:"set null"})},e=>[(0,c.Pe)().on(e.email),(0,c.Pe)().on(e.teamId),(0,c.Pe)().on(e.finalizedBy)]);let U=(0,a.rL)("gentype",["web","web-html-css","mobile","mobile-html-css"]),k=(0,a.rL)("model",["gpt-5","gemini-2.5-flash"]),q=(0,l.cJ)("flows",{id:F().primaryKey().$defaultFn(b.$),userId:F().notNull().references(()=>A.id,{onDelete:"cascade"}).$defaultFn(b.$),teamId:F(),createdAt:(0,s.vE)().notNull().defaultNow(),projectName:(0,i.yf)({length:255}),cover:(0,o.Qq)(),genType:U().notNull(),model:k(),themeId:F(),referenceStructure:(0,o.Qq)(),originalFlowId:F(),referenceImageUrl:(0,o.Qq)(),pendingReferenceImage:(0,o.Qq)(),pendingFigmaScreenshot:(0,o.Qq)(),pendingFigmaHtml:(0,o.Qq)(),pendingFigmaUrl:(0,o.Qq)(),pendingFigmaLastModified:(0,o.Qq)(),summary:(0,o.Qq)(),isThemeLocked:(0,d.zM)().default(!1)},e=>[(0,f.mt)({columns:[e.originalFlowId],foreignColumns:[e.id]}).onDelete("set null"),(0,c.Pe)("flows_for_user").on(e.userId.asc(),e.originalFlowId,e.createdAt.desc()),(0,c.Pe)("flows_for_team").on(e.teamId),(0,c.Pe)().on(e.originalFlowId)]),M=(0,l.cJ)("screens",{id:F().primaryKey().$defaultFn(b.$),flowId:F().notNull().references(()=>q.id,{onDelete:"cascade"}),screenName:(0,i.yf)({length:128}),activeStructureId:F(),coverUrl:(0,o.Qq)(),index:(0,g.IF)().notNull(),x:(0,g.IF)(),y:(0,g.IF)(),createdAt:(0,s.vE)().notNull().defaultNow()},e=>[(0,c.Pe)().on(e.flowId)]),P=(0,a.rL)("sender",["assistant","user"]);(0,l.cJ)("messages",{id:F().primaryKey().$defaultFn(b.$),screenId:F().notNull().references(()=>M.id,{onDelete:"cascade"}),text:(0,o.Qq)(),sender:P().notNull(),cover:(0,o.Qq)(),screenName:(0,i.yf)({length:128}),structureId:F().references(()=>C.id,{onDelete:"set null"}),referenceImageUrl:(0,o.Qq)(),figmaHtml:(0,o.Qq)(),figmaScreenshotUrl:(0,o.Qq)(),selectedHtml:(0,o.Qq)(),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)},e=>[(0,c.Pe)().on(e.screenId),(0,c.Pe)().on(e.structureId)]);let C=(0,l.cJ)("structures",{id:F().primaryKey().$defaultFn(b.$),screenId:F().notNull().references(()=>M.id,{onDelete:"cascade"}),htmlCss:(0,o.Qq)(),legacyComponents:(0,p.Fx)(),themeId:F().references(()=>G.id),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)},e=>[(0,c.Pe)().on(e.screenId),(0,y.z6)("must_have_data",(0,I.ll)(N(),e.htmlCss,e.legacyComponents))]);(0,l.cJ)("imageQueries",{query:(0,i.yf)({length:1024}).primaryKey(),createdAt:(0,s.vE)().notNull().defaultNow(),url:(0,o.Qq)().notNull()},e=>[(0,c.Pe)("createdAt").on(e.createdAt)]);let $=(0,l.cJ)("likes",{structureId:F().primaryKey(),like:(0,d.zM)().notNull(),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)}),j=(0,l.cJ)("figma_tokens",{userId:F().primaryKey().references(()=>A.id,{onDelete:"cascade"}),token:(0,o.Qq)().notNull(),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)});(0,l.cJ)("figma_references",{id:F().primaryKey().$defaultFn(b.$),flowId:F().notNull().references(()=>q.id,{onDelete:"cascade"}),figmaUrl:(0,o.Qq)().notNull(),html:(0,o.Qq)().notNull(),screenshotUrl:(0,o.Qq)().notNull(),lastModified:(0,o.Qq)(),createdAt:(0,s.vE)().notNull().defaultNow(),updatedAt:(0,s.vE)().notNull().defaultNow().$onUpdate(()=>new Date)},e=>[(0,c.Pe)().on(e.flowId)]);let B={"--radius-sm":{size:"Small",example:4},"--radius-md":{size:"Medium",example:6},"--radius-lg":{size:"Large",example:8},"--radius-xl":{size:"Extra Large (e.g. for pills)",example:12}},L={"--background":"Main app background color","--foreground":"Default text color for content and UI","--border":"Borders for inputs, cards, and containers","--input":"Background for input fields and text areas","--primary":"Main interactive elements (buttons, links)","--primary-foreground":"Text color inside primary buttons","--secondary":"Secondary sections background (panels, badges)","--secondary-foreground":"Text or icons on secondary backgrounds","--muted":"Background for disabled or low-priority items","--muted-foreground":"Text for disabled or secondary actions","--success":"Background for success messages and badges","--success-foreground":"Text on success backgrounds","--accent":"Special highlights or attention elements","--accent-foreground":"Text on accent highlights","--destructive":"Background for critical errors or delete actions","--destructive-foreground":"Text on destructive backgrounds","--warning":"Background for warnings and alerts","--warning-foreground":"Text on warning backgrounds","--card":"Background for card containers","--card-foreground":"Main text inside cards","--sidebar":"Background for side navigation areas","--sidebar-foreground":"Text and icons inside sidebar","--sidebar-primary":"Highlighted/active sidebar item background","--sidebar-primary-foreground":"Text for active sidebar items"},z=()=>(0,i.yf)({length:255}).notNull(),G=(0,l.cJ)("themes",{id:F().primaryKey().$defaultFn(b.$),name:(0,i.yf)({length:255}).notNull(),createdAt:(0,s.vE)().notNull().defaultNow(),userId:F().references(()=>A.id,{onDelete:"cascade"}),...h(B,z),...h(L,z),fontFamilyBody:x().notNull()},e=>[(0,c.Pe)().on(e.userId,e.createdAt)]);(0,l.cJ)("flags",{name:(0,i.yf)({length:64}).primaryKey(),value:(0,p.Fx)().notNull()}),(0,v.r)(A),(0,v.r)(E),(0,v.r)(q),(0,v.lF)(q),(0,v.lF)(M),(0,v.r)($),(0,v.r)(j),(0,v.r)(D);let K=U.enumValues;k.enumValues,w.Ay$.enum(T.enumValues),(0,v.lF)(G).extend({fontFamilyBody:w.Ay$.enum(S).optional()});var R=n(77041);let V=R.enum(K),J=R.object({flowId:R.string().min(1,"Flow ID is required"),chatId:R.string().min(1,"Chat ID is required"),message:R.string().min(1,"Message cannot be empty"),hiddenMessage:R.string(),extra:R.union([R.object({selectedHtml:R.string()}),R.object({previousScreenPrompt:R.string()})]).optional()}),O="gpt-5";J.extend({userId:R.string().min(1,"User ID is required"),genType:V});let H=R.object(h(B,e=>{let{size:t,example:n}=e;return R.string().describe("".concat(t,' border radius (in px, default "').concat(n,'px")')).prefault("".concat(n,"px"))})),W=R.object(h(L,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return R.string().describe("".concat("#ABC123 hex code format. ").concat(e))})),Y=R.object({...W.shape,...H.shape,fontFamilyBody:R.enum(["inter","dmSans","nunito","ptSerif","spaceGrotesk","ibmPlexMono","ibmPlexSans","robotoSlab","geist","shantellSans"]).describe("Font family for all text elements on page")}),Z=R.object({screenName:R.string().min(1,"Screen name is required"),html:R.string().min(1,"HTML is required")}),X=R.object({action:R.literal("create"),themeName:R.string(),designTokens:Y});R.object({themeDecision:X});let ee=R.object({action:R.literal("not_needed")});R.object({themeDecision:R.discriminatedUnion("action",[ee,X])});let et=R.object({botMessageId:R.string(),screenName:R.string().optional(),designOptions:R.string()}),en=R.email()},48842:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(58884),a=n(12949),i=n(38135),l=n(87358);let o="e579e2f29daf3dd003ed2fccc79e099e",s="true"===l.env.ANALYTICS_DISABLED;if(!o)throw Error("Amplitude API key is not set");let d=null,u=async()=>{if(!d)try{d=(await n.e(3078).then(n.bind(n,43078))).plugin}catch(e){return console.error("Failed to load engagement plugin:",e),null}return d},c={init:async()=>{if(!s){r.Ts(o,void 0,{logLevel:a.$.Warn,defaultTracking:{sessions:!0,pageViews:!0,formInteractions:!0,fileDownloads:!0}});try{let e=await u();e&&r.WQ(e())}catch(e){console.error("Error adding engagement plugin:",e)}}},logEvent:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s||r.u4(e,t)},setUserId:e=>{s||r.do(e)},setUserProperties:e=>{if(s)return;let t=new i.T$;Object.entries(e).forEach(e=>{let[n,r]=e;t.set(n,r)}),r.ls(t)},reset:()=>{s||r.cL()}}},52779:(e,t,n)=>{"use strict";n.d(t,{cn:()=>i});var r=n(99065),a=n(66253);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.QP)((0,r.$)(t))}},61641:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(11901);function a(){let{data:e,status:t}=(0,r.useSession)();if("authenticated"!==t)throw Error("Not authenticated");return e}},63323:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(95155),a=n(19749),i=n(52779),l=n(50007);let o=e=>{let t,n,o,s,d,u,c,m,f,g=(0,a.c)(27);g[0]!==e?({children:t,asChild:s,variant:d,size:u,className:n,keepStyleWhenDisabled:c,...o}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=o,g[4]=s,g[5]=d,g[6]=u,g[7]=c):(t=g[1],n=g[2],o=g[3],s=g[4],d=g[5],u=g[6],c=g[7]);let p=void 0===d?"primary":d,y=void 0===u?"md":u,v=void 0!==c&&c,b=void 0!==s&&s?l.DX:"button",w="disabled"===p||o.disabled,h=w&&!v,I="primary"===p,N="primary-inactive"===p,S="secondary"===p,x="tertiary"===p,F="ghost"===p,A="filter"===p,E="filter-active"===p,D="md"===y,_="sm"===y,T="xs"===y,Q=w&&v;return g[8]!==n||g[9]!==h||g[10]!==A||g[11]!==E||g[12]!==D||g[13]!==_||g[14]!==T||g[15]!==Q||g[16]!==I||g[17]!==N||g[18]!==S||g[19]!==x||g[20]!==F?(m=(0,i.cn)({"bg-primary text-white":I,"bg-[#F1F1F1] text-[#8B8B8B]":N,"bg-secondary text-secondary-foreground":S,"border-border/30 box-border border border-solid text-primary":x,"text-[#0B99FF]":F,"box-border inline-flex h-auto items-center justify-center self-start rounded-full border border-black/10 px-2 py-0.5 text-sm !font-medium !text-gray-400 hover:!text-gray-500":A,"box-border inline-flex h-auto items-center justify-center self-start rounded-full border border-transparent bg-secondary px-2 py-0.5 text-sm !font-medium !text-secondary-foreground":E,"h-10 rounded-xl px-4 py-3":D,"rounded-lg px-3 py-1.5":_,"rounded-full px-2 py-0.5":T,"cursor-not-allowed bg-[#A0A0A0]/10 text-black/50":h,"cursor-not-allowed":Q},"grid select-none content-center self-stretch text-sm font-semibold",n),g[8]=n,g[9]=h,g[10]=A,g[11]=E,g[12]=D,g[13]=_,g[14]=T,g[15]=Q,g[16]=I,g[17]=N,g[18]=S,g[19]=x,g[20]=F,g[21]=m):m=g[21],g[22]!==b||g[23]!==t||g[24]!==o||g[25]!==m?(f=(0,r.jsx)(b,{className:m,...o,children:t}),g[22]=b,g[23]=t,g[24]=o,g[25]=m,g[26]=f):f=g[26],f}},70891:(e,t,n)=>{"use strict";n.d(t,{Ag:()=>g,Ew:()=>h,Mh:()=>I,TI:()=>w,ZA:()=>v,iW:()=>p,mp:()=>f,nh:()=>m,vM:()=>y,z0:()=>b});var r=n(19749),a=n(36829),i=n(55902),l=n(48842),o=n(45898),s=n(71498),d=n(38254),u=n(27806),c=n(90214);let m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,{data:n,fetchNextPage:r,hasNextPage:a,isFetchingNextPage:i,isLoading:l}=d.i.getVisibleFlows.useInfiniteQuery({filter:e,pageSize:t},{getNextPageParam:e=>e.cursor});return{flows:(null==n?void 0:n.pages.flatMap(e=>e.flows))||[],isLoading:l,loadMoreChats:async()=>{a&&!i&&await r()},hasNextPage:a,isFetchingNextPage:i}},f=()=>{let e=d.i.useUtils();return d.i.createFlow.useMutation({onSuccess:async()=>{await e.getVisibleFlows.invalidate()},onError:e=>i.Cp(e)})},g=()=>{let e=d.i.useUtils();return d.i.addScreenToFlow.useMutation({onMutate:async t=>{let{flowId:n,screenId:r,x:a,y:i}=t;await e.getFlowScreens.cancel({flowId:n});let l=e.getFlowScreens.getData({flowId:n});return l&&e.getFlowScreens.setData({flowId:n},[...l,{id:r,x:a,y:i}]),{prevScreens:l}},onError:(t,n,r)=>{let{flowId:a}=n;(null==r?void 0:r.prevScreens)&&e.getFlowScreens.setData({flowId:a},r.prevScreens)},onSettled:async(t,n,r)=>{let{flowId:a}=r;await e.getFlowScreens.invalidate({flowId:a})}})},p=()=>{let e,t=(0,r.c)(4),n=d.i.useUtils(),{fitViewToChat:a}=(0,u.k)(),i=(0,c.d)();return t[0]!==a||t[1]!==i||t[2]!==n?(e={onSuccess:async e=>{let{flowId:t,screenId:r}=e;l.A.logEvent("[Flow] screen duplicate success"),await n.getFlowScreens.invalidate({flowId:t}),i(r),a(r)},onError:N},t[0]=a,t[1]=i,t[2]=n,t[3]=e):e=t[3],d.i.duplicateScreenActiveStructure.useMutation(e)},y=e=>{let t=d.i.useUtils();return d.i.deleteScreen.useMutation({onSuccess:async()=>{await t.getFlowScreens.invalidate({flowId:e})}})},v=()=>{let e=d.i.useUtils();return d.i.updateFlow.useMutation({onMutate:t=>{let{flowId:n,updates:r}=t;return b(e,n,r)},onError:(e,t,n)=>{null==n||n.revertOptimisticFlowUpdate()},onSettled:(t,n,r)=>{let{flowId:a}=r;return Promise.all([e.getFlow.invalidate({flowId:a}),e.getVisibleFlows.invalidate()])}})};async function b(e,t,n){await e.getFlow.cancel({flowId:t}),await e.getVisibleFlows.cancel();let r=e.getFlow.getData({flowId:t});if(r)return e.getFlow.setData({flowId:t},{...r,...n}),{revertOptimisticFlowUpdate:()=>{e.getFlow.setData({flowId:t},r)}}}let w=()=>{let e=d.i.useUtils();return d.i.updateScreenOrder.useMutation({onMutate:async t=>{let{flowId:n,screenIds:r}=t;await e.getFlowScreens.cancel({flowId:n});let a=e.getFlowScreens.getData({flowId:n});if(a){let t=r.map(e=>a.find(t=>t.id===e)).filter(e=>void 0!==e);e.getFlowScreens.setData({flowId:n},t)}return{previousScreens:a}},onError:(t,n,r)=>{let{flowId:a}=n;(null==r?void 0:r.previousScreens)&&e.getFlowScreens.setData({flowId:a},r.previousScreens)},onSettled:async(t,n,r)=>{let{flowId:a}=r;await e.getFlowScreens.invalidate({flowId:a})}})},h=e=>o.nY.strip().parse(e),I=(e,t)=>{let n,i,l,d=(0,r.c)(7),u=(0,a.Bq)(e,t);if(!u)return;if(d[0]!==u?(n=o.Sr.strip().parse(u),d[0]=u,d[1]=n):n=d[1],d[2]!==n){let{fontFamilyBody:e,...t}=n;i=t,d[2]=n,d[3]=i}else i=d[3];let c=s.l[u.fontFamilyBody];return d[4]!==c.value.style.fontFamily||d[5]!==i?(l={...i,"--font-family-body":c.value.style.fontFamily},d[4]=c.value.style.fontFamily,d[5]=i,d[6]=l):l=d[6],l};function N(e,t){let{screenId:n}=t;i.Cp(e),l.A.logEvent("[Flow] screen duplicate error",{screenId:n})}},71498:(e,t,n)=>{"use strict";n.d(t,{T:()=>S,l:()=>x});var r=n(97025),a=n.n(r),i=n(31394),l=n.n(i),o=n(58397),s=n.n(o),d=n(95908),u=n.n(d),c=n(82014),m=n.n(c),f=n(79151),g=n.n(f),p=n(38934),y=n.n(p),v=n(66838),b=n.n(v),w=n(61581),h=n.n(w),I=n(94286),N=n.n(I);let S=[{name:"Old Banani",value:"#242424"},{name:"Grape",value:"#634AFF"},{name:"Blueberry",value:"#284CFF"},{name:"Kiwi",value:"#00C846"},{name:"Mint",value:"#00B09F"},{name:"Persimmon",value:"#FF5B27"},{name:"Dragon Fruit",value:"#F54997"},{name:"Strawberry",value:"#FF272A"}],x={inter:{name:"Inter",value:a()},dmSans:{name:"DM Sans",value:l()},nunito:{name:"Nunito",value:s()},ptSerif:{name:"PT Serif",value:u()},spaceGrotesk:{name:"Space Grotesk",value:m()},ibmPlexMono:{name:"IBM Plex Mono",value:g()},ibmPlexSans:{name:"IBM Plex Sans",value:y()},robotoSlab:{name:"Roboto Slab",value:b()},geist:{name:"Geist",value:h()},shantellSans:{name:"Shantell Sans",value:N()}}},81500:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(95155),a=n(19749),i=n(84723);let l=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",margin:"auto"},children:(0,r.jsx)(i.Z,{width:50,height:50})}),t[0]=e):e=t[0],e},o=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{style:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(l,{})}),t[0]=e):e=t[0],e}},84723:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(95155),a=n(19749);n(12115);var i=n(27278),l=n.n(i);let o=e=>{let t,n,i=(0,a.c)(6),{width:o,height:s,noSpinner:d}=e,u=void 0===o?24:o,c=void 0===s?24:s;i[0]!==c||i[1]!==u?(t={width:u,height:c},i[0]=c,i[1]=u,i[2]=t):t=i[2];let m=void 0!==d&&d?"":l().spinner;return i[3]!==t||i[4]!==m?(n=(0,r.jsx)("img",{style:t,src:"/banana.png",alt:"send",className:m}),i[3]=t,i[4]=m,i[5]=n):n=i[5],n}},84968:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var r=n(19749),a=n(12115),i=n(86300);function l(){let e,t=(0,r.c)(2),{subscribe:n,getSnapshot:l}=(0,a.useContext)(i.U);t[0]!==l?(e=()=>l(),t[0]=l,t[1]=e):e=t[1];let o=e;return(0,a.useSyncExternalStore)(n,o,o)}},86300:(e,t,n)=>{"use strict";n.d(t,{U:()=>l,t:()=>o});var r=n(95155),a=n(12115),i=n(54731);let l=(0,a.createContext)({subscribe:()=>()=>{},getSnapshot:()=>null,setActiveScreenId:()=>{}});function o(e){let{children:t}=e,[n,o]=(0,i.ZA)("activeScreenId",i.tU),s=(0,a.useRef)(n);(0,a.useLayoutEffect)(()=>{s.current!==n&&(s.current=n,d.current.forEach(e=>e()))},[n]);let d=(0,a.useRef)(new Set),u=(0,a.useCallback)(e=>(d.current.add(e),()=>{d.current.delete(e)}),[]),c=(0,a.useCallback)(()=>s.current,[]),m=(0,a.useRef)(o);m.current=o;let f=(0,a.useCallback)(e=>{m.current(e),s.current!==e&&(s.current=e,d.current.forEach(e=>e()))},[]),g=(0,a.useRef)({subscribe:u,getSnapshot:c,setActiveScreenId:f});return(0,r.jsx)(l.Provider,{value:g.current,children:t})}},88571:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});let r=(0,n(12115).createContext)({get flow(){throw Error("flowContext was not initialized")}})},90214:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(12115),a=n(86300);function i(){return(0,r.useContext)(a.U).setActiveScreenId}},94265:(e,t,n)=>{"use strict";n.d(t,{IG:()=>s,j2:()=>o,xv:()=>l});var r=n(55298),a=n(68953),i=n(59003);let l=0===(0,r.Dk)().length?(0,r.Wp)({apiKey:"AIzaSyCiORxa9XKHsHnyvU9QnuAHQzXDEitlNqo",authDomain:"banani-prod.firebaseapp.com",projectId:"banani-prod",storageBucket:"banani-prod.appspot.com",messagingSenderId:"580239800005",appId:"1:580239800005:web:d1f4b57016441d63d122ac",measurementId:"G-02YP941XWQ"}):(0,r.Dk)()[0],o=(0,a.xI)(l),s=(0,i.c7)()}}]);